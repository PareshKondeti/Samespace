{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import ListItem from\"../components/list\";import Frame from'../assets/Frame.svg';import AudioPlayer from'react-h5-audio-player';import'react-h5-audio-player/lib/styles.css';import logo from'../assets/Logo.svg';import profile from'../assets/Profile.svg';import{useQuery}from'@apollo/client';import{GET_SONGS}from'./graphql';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TABS={for_you:'for_you',top_tracks:'top_tracks'};const Homepage=()=>{var _selectedSong$cover;const{loading,data:songsData}=useQuery(GET_SONGS);const[selectedSong,setSelectedSong]=useState({});const[activeTab,setActiveTab]=useState(TABS.for_you);const[filteredData,setFilteredData]=useState([]);const[searchValue,setSearchValue]=useState('');const[showList,setShowList]=useState(true);useEffect(()=>{setFilteredData(!loading?songsData===null||songsData===void 0?void 0:songsData.songs:[]);setActiveTab(TABS.for_you);},[loading,songsData===null||songsData===void 0?void 0:songsData.songs]);useEffect(()=>{if(activeTab===TABS.top_tracks){let list_of_songs=songsData===null||songsData===void 0?void 0:songsData.songs.filter(item=>item.top_track===true);setFilteredData(list_of_songs);}else if(activeTab===TABS.for_you){setFilteredData(songsData===null||songsData===void 0?void 0:songsData.songs);}},[activeTab,songsData===null||songsData===void 0?void 0:songsData.songs]);function handleNext(data){let id=data.id;filteredData.forEach((item,index)=>{if(item.id===id){setSelectedSong(filteredData[(index+1)%filteredData.length]);}});}function handlePrev(data){let id=data.id;filteredData.forEach((item,index)=>{if(item.id===id){setSelectedSong(filteredData[(index-1+filteredData.length)%filteredData.length]);}});}function handleSearch(param1){setSearchValue(param1.toLowerCase());}return/*#__PURE__*/_jsxs(\"div\",{className:\"homepage\",style:{background:\"linear-gradient(280deg, \".concat(selectedSong.accent,\", rgba(0.40, 0.30, 0.50, 0.50) 88.27%), #000\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:profile,alt:\"profile\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"show_list\",onClick:()=>setShowList(!showList),children:!showList?\"Show List\":\"Hide List\"}),/*#__PURE__*/_jsxs(\"div\",{className:showList?'middle':'middle display_none',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbar\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>setActiveTab(TABS.for_you),className:\"for_you \".concat(activeTab===TABS.for_you?'':'not_selected'),children:\"For You\"}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setActiveTab(TABS.top_tracks),className:\"top_tracks \".concat(activeTab===TABS.top_tracks?'':'not_selected'),children:\"Top Tracks\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_bar\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search Song, Artist\",onChange:event=>handleSearch(event.target.value)}),/*#__PURE__*/_jsx(\"img\",{src:Frame,alt:\"search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list_item_container\",children:filteredData===null||filteredData===void 0?void 0:filteredData.filter(data=>data.name.toLowerCase().includes(searchValue)||data.artist.toLowerCase().includes(searchValue)).map((item,index)=>{var _item$cover;return/*#__PURE__*/_jsx(ListItem,{icon:(_item$cover=item.cover)===null||_item$cover===void 0?void 0:_item$cover.id,artist:item.artist,name:item.name,data:item,selectedSong:selectedSong,setSelectedSong:value=>setSelectedSong(value)},index);})})]}),selectedSong&&Object.keys(selectedSong).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:showList?\"media-player display_none\":\"media-player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"played_songs_details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"song_played\",children:selectedSong.name}),/*#__PURE__*/_jsx(\"div\",{className:\"artist_played\",children:selectedSong.artist})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cover_art_container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://cms.samespace.com/assets/\".concat((_selectedSong$cover=selectedSong.cover)===null||_selectedSong$cover===void 0?void 0:_selectedSong$cover.id),alt:\"name\",className:\"cover_art\"})}),/*#__PURE__*/_jsx(AudioPlayer,{autoPlay:true,layout:\"stacked-reverse\",src:selectedSong.url,showDownloadProgress:false,showSkipControls:true,showJumpControls:false,onClickNext:e=>handleNext(selectedSong),onClickPrevious:e=>handlePrev(selectedSong),onEnded:()=>handleNext(selectedSong)})]})]});};export default Homepage;","map":{"version":3,"names":["React","useEffect","useState","ListItem","Frame","AudioPlayer","logo","profile","useQuery","GET_SONGS","jsx","_jsx","jsxs","_jsxs","TABS","for_you","top_tracks","Homepage","_selectedSong$cover","loading","data","songsData","selectedSong","setSelectedSong","activeTab","setActiveTab","filteredData","setFilteredData","searchValue","setSearchValue","showList","setShowList","songs","list_of_songs","filter","item","top_track","handleNext","id","forEach","index","length","handlePrev","handleSearch","param1","toLowerCase","className","style","background","concat","accent","children","src","alt","onClick","placeholder","onChange","event","target","value","name","includes","artist","map","_item$cover","icon","cover","Object","keys","autoPlay","layout","url","showDownloadProgress","showSkipControls","showJumpControls","onClickNext","e","onClickPrevious","onEnded"],"sources":["D:/SAMESPACe/Assignment-main/src/pages/homepage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ListItem from \"../components/list\";\nimport Frame from '../assets/Frame.svg';\nimport AudioPlayer from 'react-h5-audio-player';\nimport 'react-h5-audio-player/lib/styles.css';\nimport logo from '../assets/Logo.svg';\nimport profile from '../assets/Profile.svg';\nimport { useQuery } from '@apollo/client';\nimport { GET_SONGS } from './graphql'; \nconst TABS = {\n    for_you: 'for_you',\n    top_tracks: 'top_tracks'\n}\n\nconst Homepage = () =>{\n    const { loading, data: songsData } = useQuery(GET_SONGS);\n    const [selectedSong, setSelectedSong] = useState({});\n    const [activeTab, setActiveTab] = useState(TABS.for_you);\n    const [filteredData, setFilteredData] = useState([]);\n    const [searchValue, setSearchValue] = useState('');\n    const [showList, setShowList] = useState(true);\n\n    useEffect(() => {\n        setFilteredData(!loading ? songsData?.songs : []);\n        setActiveTab(TABS.for_you);\n    }, [loading, songsData?.songs]);\n\n    useEffect(() => {\n        if (activeTab === TABS.top_tracks) {\n            let list_of_songs = songsData?.songs.filter((item) => item.top_track === true);\n            setFilteredData(list_of_songs);\n        } else if (activeTab === TABS.for_you) {\n            setFilteredData(songsData?.songs);\n        }\n    }, [activeTab, songsData?.songs]);\n\n    function handleNext(data){\n        let id = data.id;\n        filteredData.forEach((item, index) => {\n            if(item.id === id){\n                setSelectedSong(filteredData[(index+1) % filteredData.length]);\n            }\n        });\n    }\n\n    function handlePrev(data){\n        let id = data.id;\n        filteredData.forEach((item, index) => {\n            if(item.id === id){\n                setSelectedSong(filteredData[(index - 1 + filteredData.length) % filteredData.length]);\n            }\n        });\n    }\n\n    function handleSearch(param1){\n        setSearchValue(param1.toLowerCase());\n    }\n\n    return (\n        <div className=\"homepage\" style={{ background: `linear-gradient(280deg, ${selectedSong.accent}, rgba(0.40, 0.30, 0.50, 0.50) 88.27%), #000` }}>\n            <div className=\"sidebar\">\n                <div>\n                    <img src={logo} alt=\"logo\"/>\n                </div>\n                <div>\n                    <img src={profile} alt=\"profile\"/>\n                </div>\n            </div>\n            <div className=\"show_list\" onClick={() => setShowList(!showList)}>{!showList ? \"Show List\" : \"Hide List\"}</div>\n            <div className={showList ? 'middle' : 'middle display_none'}>\n                <div className=\"topbar\">\n                    <div onClick={() => setActiveTab(TABS.for_you)} className={`for_you ${activeTab === TABS.for_you ? '' : 'not_selected'}`}>For You</div>\n                    <div onClick={() => setActiveTab(TABS.top_tracks)} className={`top_tracks ${activeTab === TABS.top_tracks ? '' : 'not_selected'}`}>Top Tracks</div>\n                </div>\n                <div className=\"search_bar\">\n                    <input placeholder=\"Search Song, Artist\" onChange={(event) => handleSearch(event.target.value)}/>\n                    <img src={Frame} alt=\"search\"/>\n                </div>\n                <div className=\"list_item_container\">\n                    {filteredData?.filter((data) => (data.name.toLowerCase().includes(searchValue) || data.artist.toLowerCase().includes(searchValue))).map((item, index) => {\n                        return (\n                            <ListItem\n                                icon={item.cover?.id}\n                                artist={item.artist}\n                                name={item.name}\n                                data={item}\n                                selectedSong={selectedSong}\n                                setSelectedSong={(value) => setSelectedSong(value)}\n                                key={index}\n                            />\n                        )\n                    })}\n                </div>\n            </div>\n            {selectedSong && Object.keys(selectedSong).length > 0 &&\n            <div className={showList ? \"media-player display_none\" : \"media-player\"}>\n                <div className=\"played_songs_details\">\n                    <div className=\"song_played\">{selectedSong.name}</div>\n                    <div className=\"artist_played\">{selectedSong.artist}</div>\n                </div>\n                <div className=\"cover_art_container\">\n                    <img src={`https://cms.samespace.com/assets/${selectedSong.cover?.id}`} alt=\"name\" className=\"cover_art\"/>\n                </div>\n                <AudioPlayer\n                    autoPlay\n                    layout=\"stacked-reverse\"\n                    src={selectedSong.url}\n                    showDownloadProgress={false}\n                    showSkipControls={true}\n                    showJumpControls={false}\n                    onClickNext={(e) => handleNext(selectedSong)}\n                    onClickPrevious={(e) => handlePrev(selectedSong)}\n                    onEnded={() => handleNext(selectedSong)}\n                    \n    \n                    \n                />\n                \n            </div>}\n        </div>\n    )\n}\n\nexport default Homepage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}